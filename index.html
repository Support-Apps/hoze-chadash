<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>החוזה שלי עם עצמי</title>
<link href="https://fonts.googleapis.com/css2?family=Frank+Ruhl+Libre:wght@300;400;500;700;900&family=Secular+One&family=Miriam+Libre:wght@400;700&family=Suez+One&display=swap" rel="stylesheet">
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

:root {
  --parchment: #f5f0e8;
  --parchment-dark: #e8dcc8;
  --ink-old: #3d2b1f;
  --ink-faded: #6b5744;
  --red-seal: #8b2500;
  --red-seal-light: #a83a1a;
  --gold: #c5a55a;
  --gold-light: #d4b96e;
  --gold-dark: #a08535;
  --baby-pink: #f8c8d4;
  --baby-pink-light: #fce4ec;
  --mint: #a8d8c8;
  --mint-light: #c8ede0;
  --rose-gold: #c4957a;
  --deep-rose: #8b4557;
  --cream: #fdf8f0;
  --stamp-blue: #2c4a6e;
}

body {
  font-family: 'Frank Ruhl Libre', serif;
  background: #2a2018;
  min-height: 100vh;
  padding: 20px;
  overflow-x: hidden;
}

.desk-surface {
  background: 
    radial-gradient(ellipse at 50% 30%, #3d2b1f 0%, #2a2018 70%);
  min-height: 100vh;
  padding: 30px 15px;
  position: relative;
}

.desk-surface::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url("data:image/svg+xml,%3Csvg width='200' height='200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 0;
}

.app-title {
  text-align: center;
  margin-bottom: 40px;
  position: relative;
  z-index: 1;
}

.app-title h1 {
  font-family: 'Suez One', serif;
  font-size: clamp(28px, 5vw, 48px);
  color: var(--gold);
  text-shadow: 0 2px 8px rgba(0,0,0,0.5);
  letter-spacing: 2px;
  margin-bottom: 8px;
}

.app-title .subtitle {
  font-family: 'Frank Ruhl Libre', serif;
  font-size: clamp(14px, 2.5vw, 18px);
  color: var(--gold-dark);
  font-weight: 300;
  opacity: 0.8;
}

.ornamental-divider {
  text-align: center;
  color: var(--gold);
  font-size: 24px;
  margin: 15px 0;
  opacity: 0.6;
  letter-spacing: 8px;
}

/* Tab Navigation */
.tab-nav {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-bottom: 35px;
  position: relative;
  z-index: 2;
}

.tab-btn {
  font-family: 'Suez One', serif;
  font-size: clamp(14px, 2.5vw, 18px);
  padding: 12px 30px;
  border: 2px solid var(--gold-dark);
  background: transparent;
  color: var(--gold);
  cursor: pointer;
  transition: all 0.4s ease;
  position: relative;
  letter-spacing: 1px;
}

.tab-btn::before {
  content: '';
  position: absolute;
  inset: 3px;
  border: 1px solid var(--gold-dark);
  opacity: 0.4;
  transition: opacity 0.3s;
}

.tab-btn:hover {
  background: rgba(197, 165, 90, 0.1);
}

.tab-btn.active {
  background: var(--gold-dark);
  color: #1a1208;
}

.tab-btn.active::before {
  opacity: 0;
}

/* Contract Container */
.contracts-wrapper {
  max-width: 750px;
  margin: 0 auto;
  position: relative;
  z-index: 1;
}

.contract {
  display: none;
  animation: fadeContract 0.8s ease;
}

.contract.active {
  display: block;
}

@keyframes fadeContract {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Paper Effect */
.paper {
  background: var(--parchment);
  position: relative;
  padding: 50px 40px 60px;
  box-shadow: 
    0 0 0 1px rgba(0,0,0,0.05),
    0 3px 15px rgba(0,0,0,0.3),
    0 10px 40px rgba(0,0,0,0.4),
    inset 0 0 80px rgba(139,107,62,0.08);
}

.paper::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url("data:image/svg+xml,%3Csvg width='300' height='300' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='p'%3E%3CfeTurbulence baseFrequency='0.65' numOctaves='5' stitchTiles='stitch'/%3E%3CfeColorMatrix values='0 0 0 0 0.9 0 0 0 0 0.85 0 0 0 0 0.75 0 0 0 0.06 0'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23p)'/%3E%3C/svg%3E");
  pointer-events: none;
  opacity: 0.5;
}

.paper-old {
  background: 
    linear-gradient(135deg, #ede5d0 0%, #f5f0e8 20%, #e8dcc8 50%, #f0e8d5 80%, #e5dbc5 100%);
}

.paper-old::after {
  content: '';
  position: absolute;
  top: 10px;
  left: 10px;
  right: 10px;
  bottom: 10px;
  border: 1px solid rgba(107,87,68,0.15);
  pointer-events: none;
}

.paper-new {
  background: 
    linear-gradient(135deg, var(--cream) 0%, #fff5f8 30%, var(--baby-pink-light) 60%, #fff8f0 100%);
}

.paper-new::after {
  content: '';
  position: absolute;
  top: 10px;
  left: 10px;
  right: 10px;
  bottom: 10px;
  border: 1px solid var(--baby-pink);
  pointer-events: none;
}

/* Contract Header */
.contract-header {
  text-align: center;
  margin-bottom: 30px;
  position: relative;
  z-index: 1;
}

.header-ornament {
  font-size: 28px;
  color: var(--gold-dark);
  letter-spacing: 4px;
  margin-bottom: 10px;
}

.contract-header h2 {
  font-family: 'Suez One', serif;
  font-size: clamp(22px, 4vw, 34px);
  margin-bottom: 6px;
  letter-spacing: 3px;
}

.old-title {
  color: var(--ink-old);
}

.new-title {
  color: var(--deep-rose);
}

.contract-header .contract-number {
  font-size: 13px;
  color: var(--ink-faded);
  font-weight: 300;
  letter-spacing: 2px;
  margin-top: 4px;
}

.header-line {
  width: 80%;
  margin: 15px auto;
  height: 1px;
  position: relative;
}

.header-line-old {
  background: var(--ink-faded);
  opacity: 0.3;
}

.header-line-old::before,
.header-line-old::after {
  content: '';
  position: absolute;
  width: 100%;
  height: 1px;
  background: var(--ink-faded);
  opacity: 0.2;
}

.header-line-old::before { top: -3px; }
.header-line-old::after { bottom: -3px; }

.header-line-new {
  background: var(--baby-pink);
}

.header-line-new::before,
.header-line-new::after {
  content: '';
  position: absolute;
  width: 100%;
  height: 1px;
  background: var(--baby-pink);
  opacity: 0.4;
}

.header-line-new::before { top: -3px; }
.header-line-new::after { bottom: -3px; }

/* Preamble */
.preamble {
  text-align: center;
  font-size: clamp(13px, 2vw, 15px);
  line-height: 2;
  margin-bottom: 30px;
  position: relative;
  z-index: 1;
  font-weight: 300;
}

.preamble-old {
  color: var(--ink-faded);
  font-style: italic;
}

.preamble-new {
  color: var(--deep-rose);
  opacity: 0.85;
}

.preamble strong {
  font-weight: 700;
}

/* Clauses */
.clauses-section {
  position: relative;
  z-index: 1;
  margin-bottom: 30px;
}

.section-title {
  font-family: 'Suez One', serif;
  font-size: clamp(16px, 2.5vw, 20px);
  text-align: center;
  margin-bottom: 25px;
  letter-spacing: 2px;
}

.section-title-old {
  color: var(--ink-old);
}

.section-title-new {
  color: var(--deep-rose);
}

.clause {
  display: flex;
  gap: 12px;
  margin-bottom: 18px;
  align-items: flex-start;
  padding: 14px 18px;
  position: relative;
  transition: all 0.3s ease;
  cursor: default;
}

.clause-old {
  border-bottom: 1px solid rgba(107,87,68,0.1);
}

.clause-old:hover {
  background: rgba(139,107,62,0.04);
}

.clause-new {
  border-bottom: 1px solid rgba(248,200,212,0.3);
}

.clause-new:hover {
  background: rgba(248,200,212,0.08);
}

.clause-number {
  font-family: 'Suez One', serif;
  font-size: 18px;
  min-width: 35px;
  text-align: center;
  padding-top: 2px;
  flex-shrink: 0;
}

.clause-number-old {
  color: var(--ink-faded);
}

.clause-number-new {
  color: var(--rose-gold);
}

.clause-text {
  font-size: clamp(14px, 2.2vw, 16px);
  line-height: 1.9;
  font-weight: 400;
}

.clause-text-old {
  color: var(--ink-old);
}

.clause-text-new {
  color: #4a3040;
}

.clause-subtext {
  display: block;
  font-size: 12px;
  font-weight: 300;
  margin-top: 4px;
  font-style: italic;
  opacity: 0.65;
}

/* Crossed out effect for old contract */
.clause-old .clause-text {
  position: relative;
}

.clause.crossed .clause-text::after {
  content: '';
  position: absolute;
  right: 0;
  left: 0;
  top: 50%;
  height: 2px;
  background: var(--red-seal);
  opacity: 0.7;
  transform: rotate(-0.5deg);
  animation: strikeThrough 0.5s ease forwards;
}

@keyframes strikeThrough {
  from { transform: scaleX(0) rotate(-0.5deg); }
  to { transform: scaleX(1) rotate(-0.5deg); }
}

.clause.crossed {
  opacity: 0.5;
}

/* Checkbox for old contract */
.clause-checkbox {
  width: 20px;
  height: 20px;
  border: 2px solid var(--ink-faded);
  flex-shrink: 0;
  margin-top: 3px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s;
  background: transparent;
  position: relative;
}

.clause-checkbox:hover {
  border-color: var(--red-seal);
}

.clause.crossed .clause-checkbox {
  border-color: var(--red-seal);
  background: rgba(139,37,0,0.08);
}

.clause.crossed .clause-checkbox::after {
  content: '✗';
  color: var(--red-seal);
  font-size: 16px;
  font-weight: 700;
}

/* Heart checkbox for new contract */
.clause-heart {
  width: 22px;
  height: 22px;
  flex-shrink: 0;
  margin-top: 2px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  transition: all 0.3s;
  color: #ddd;
}

.clause-heart.checked {
  color: var(--deep-rose);
  transform: scale(1.15);
}

.clause-heart:hover {
  transform: scale(1.2);
}

/* Stamp Effects */
.stamp-container {
  position: relative;
  z-index: 2;
  margin-top: 20px;
}

.red-stamp {
  position: absolute;
  top: -60px;
  left: 20px;
  width: 130px;
  height: 130px;
  border: 4px solid var(--red-seal);
  border-radius: 50%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  transform: rotate(-15deg);
  opacity: 0;
  transition: opacity 0.6s ease;
  pointer-events: none;
}

.red-stamp.visible {
  opacity: 0.75;
}

.red-stamp::before {
  content: '';
  position: absolute;
  inset: 4px;
  border: 2px solid var(--red-seal);
  border-radius: 50%;
}

.red-stamp span {
  font-family: 'Secular One', sans-serif;
  color: var(--red-seal);
  font-size: 14px;
  font-weight: 700;
  letter-spacing: 1px;
}

.red-stamp .stamp-big {
  font-size: 20px;
  letter-spacing: 3px;
}

/* Approval stamp for new contract */
.gold-stamp {
  position: absolute;
  top: -50px;
  left: 20px;
  width: 120px;
  height: 120px;
  border: 3px solid var(--gold);
  border-radius: 50%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  transform: rotate(12deg);
  opacity: 0;
  transition: opacity 0.6s ease;
  pointer-events: none;
}

.gold-stamp.visible {
  opacity: 0.8;
}

.gold-stamp::before {
  content: '';
  position: absolute;
  inset: 4px;
  border: 2px solid var(--gold);
  border-radius: 50%;
}

.gold-stamp span {
  font-family: 'Secular One', sans-serif;
  color: var(--gold-dark);
  font-size: 13px;
  letter-spacing: 1px;
}

.gold-stamp .stamp-big {
  font-size: 18px;
  letter-spacing: 2px;
}

/* Signature Area */
.signature-area {
  margin-top: 40px;
  position: relative;
  z-index: 1;
  padding-top: 20px;
}

.signature-line {
  display: flex;
  align-items: flex-end;
  gap: 15px;
  margin-bottom: 10px;
}

.signature-label {
  font-size: 14px;
  font-weight: 500;
  white-space: nowrap;
  padding-bottom: 5px;
}

.signature-label-old { color: var(--ink-faded); }
.signature-label-new { color: var(--deep-rose); }

.signature-input {
  flex: 1;
  border: none;
  border-bottom: 1px solid;
  background: transparent;
  font-family: 'Frank Ruhl Libre', serif;
  font-size: 20px;
  padding: 5px 0;
  direction: rtl;
  outline: none;
}

.signature-input-old {
  border-color: var(--ink-faded);
  color: var(--ink-old);
}

.signature-input-old:focus {
  border-color: var(--ink-old);
}

.signature-input-new {
  border-color: var(--baby-pink);
  color: var(--deep-rose);
}

.signature-input-new:focus {
  border-color: var(--deep-rose);
}

.date-line {
  font-size: 13px;
  text-align: left;
  margin-top: 8px;
  font-weight: 300;
}

.date-line-old { color: var(--ink-faded); }
.date-line-new { color: var(--rose-gold); }

/* Action Buttons */
.action-area {
  text-align: center;
  margin-top: 35px;
  position: relative;
  z-index: 1;
}

.btn-cancel {
  font-family: 'Suez One', serif;
  font-size: 18px;
  padding: 14px 45px;
  background: var(--red-seal);
  color: var(--parchment);
  border: none;
  cursor: pointer;
  letter-spacing: 2px;
  transition: all 0.3s;
  position: relative;
}

.btn-cancel::before {
  content: '';
  position: absolute;
  inset: 3px;
  border: 1px solid rgba(245,240,232,0.3);
}

.btn-cancel:hover {
  background: var(--red-seal-light);
  transform: translateY(-1px);
  box-shadow: 0 4px 15px rgba(139,37,0,0.3);
}

.btn-sign {
  font-family: 'Suez One', serif;
  font-size: 18px;
  padding: 14px 45px;
  background: var(--deep-rose);
  color: #fff;
  border: none;
  cursor: pointer;
  letter-spacing: 2px;
  transition: all 0.3s;
  position: relative;
}

.btn-sign::before {
  content: '';
  position: absolute;
  inset: 3px;
  border: 1px solid rgba(255,255,255,0.2);
}

.btn-sign:hover {
  background: #9b5567;
  transform: translateY(-1px);
  box-shadow: 0 4px 15px rgba(139,69,87,0.3);
}

/* Progress Counter */
.progress-area {
  text-align: center;
  margin-top: 20px;
  font-size: 14px;
  font-weight: 300;
  position: relative;
  z-index: 1;
}

.progress-old { color: var(--ink-faded); }
.progress-new { color: var(--rose-gold); }

/* Celebration overlay */
.celebration-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(42,32,24,0.85);
  z-index: 100;
  align-items: center;
  justify-content: center;
  animation: fadeIn 0.5s ease;
}

.celebration-overlay.active {
  display: flex;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.celebration-card {
  background: var(--cream);
  padding: 50px 40px;
  text-align: center;
  max-width: 500px;
  margin: 20px;
  position: relative;
  box-shadow: 0 20px 60px rgba(0,0,0,0.5);
  animation: scaleIn 0.5s ease 0.2s both;
}

@keyframes scaleIn {
  from { transform: scale(0.8); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

.celebration-card::after {
  content: '';
  position: absolute;
  inset: 8px;
  border: 1px solid var(--baby-pink);
  pointer-events: none;
}

.celebration-card h2 {
  font-family: 'Suez One', serif;
  font-size: 30px;
  color: var(--deep-rose);
  margin-bottom: 15px;
}

.celebration-card p {
  font-size: 16px;
  line-height: 2;
  color: #5a4050;
  margin-bottom: 20px;
}

.celebration-card .close-btn {
  font-family: 'Frank Ruhl Libre', serif;
  font-size: 16px;
  padding: 10px 35px;
  background: var(--baby-pink);
  color: var(--deep-rose);
  border: none;
  cursor: pointer;
  letter-spacing: 1px;
  transition: all 0.3s;
}

.celebration-card .close-btn:hover {
  background: var(--deep-rose);
  color: #fff;
}

/* Confetti */
.confetti-piece {
  position: fixed;
  z-index: 101;
  pointer-events: none;
}

/* Reset Button */
.reset-area {
  text-align: center;
  margin-top: 25px;
  position: relative;
  z-index: 2;
}

.btn-reset {
  font-family: 'Frank Ruhl Libre', serif;
  font-size: 13px;
  color: var(--gold-dark);
  background: none;
  border: none;
  cursor: pointer;
  opacity: 0.5;
  transition: opacity 0.3s;
  text-decoration: underline;
  text-underline-offset: 3px;
  position: relative;
  z-index: 2;
}

.btn-reset:hover {
  opacity: 0.9;
}

/* Watermark */
.watermark {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) rotate(-30deg);
  font-family: 'Suez One', serif;
  font-size: clamp(50px, 10vw, 80px);
  pointer-events: none;
  z-index: 0;
  white-space: nowrap;
  letter-spacing: 10px;
}

.watermark-old {
  color: rgba(107,87,68,0.04);
}

.watermark-new {
  color: rgba(139,69,87,0.04);
}

.select-all-area {
  text-align: center;
  margin-bottom: 20px;
  position: relative;
  z-index: 1;
}

.btn-select-all-old {
  font-family: 'Frank Ruhl Libre', serif;
  font-size: 14px;
  padding: 8px 24px;
  background: transparent;
  border: 1px solid var(--ink-faded);
  color: var(--ink-faded);
  cursor: pointer;
  letter-spacing: 1px;
  transition: all 0.3s;
}

.btn-select-all-old:hover {
  background: rgba(107,87,68,0.08);
  border-color: var(--ink-old);
  color: var(--ink-old);
}

.btn-select-all-new {
  font-family: 'Frank Ruhl Libre', serif;
  font-size: 14px;
  padding: 8px 24px;
  background: transparent;
  border: 1px solid var(--rose-gold);
  color: var(--rose-gold);
  cursor: pointer;
  letter-spacing: 1px;
  transition: all 0.3s;
}

.btn-select-all-new:hover {
  background: rgba(196,149,122,0.1);
  border-color: var(--deep-rose);
  color: var(--deep-rose);
}

/* בס"ד */
.bsd {
  position: absolute;
  top: 12px;
  right: 15px;
  font-family: 'Frank Ruhl Libre', serif;
  font-size: 15px;
  color: var(--gold);
  opacity: 0.7;
  z-index: 3;
  letter-spacing: 1px;
}

.bsd-paper {
  text-align: right;
  font-family: 'Frank Ruhl Libre', serif;
  font-size: 16px;
  color: var(--ink-faded);
  opacity: 0.8;
  margin-bottom: -10px;
  padding-top: 5px;
  letter-spacing: 1px;
}

/* Share & Save Buttons */
.utility-bar {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin-top: 20px;
  margin-bottom: 5px;
  position: relative;
  z-index: 2;
  flex-wrap: wrap;
}

.btn-utility {
  font-family: 'Frank Ruhl Libre', serif;
  font-size: 14px;
  padding: 10px 28px;
  border: 1px solid var(--gold-dark);
  background: rgba(197,165,90,0.08);
  color: var(--gold);
  cursor: pointer;
  letter-spacing: 1px;
  transition: all 0.3s;
  display: flex;
  align-items: center;
  gap: 8px;
  position: relative;
}

.btn-utility::before {
  content: '';
  position: absolute;
  inset: 2px;
  border: 1px solid rgba(197,165,90,0.15);
  pointer-events: none;
}

.btn-utility:hover {
  background: rgba(197,165,90,0.18);
  color: var(--gold-light);
  border-color: var(--gold);
}

.btn-utility .icon {
  font-size: 16px;
}

/* Toast notification */
.toast {
  position: fixed;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%) translateY(80px);
  background: var(--ink-old);
  color: var(--parchment);
  font-family: 'Frank Ruhl Libre', serif;
  font-size: 15px;
  padding: 14px 30px;
  border-radius: 0;
  border: 1px solid var(--gold-dark);
  z-index: 200;
  opacity: 0;
  transition: all 0.4s ease;
  pointer-events: none;
  text-align: center;
  letter-spacing: 1px;
}

.toast.visible {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

/* Responsive */
@media (max-width: 600px) {
  .paper {
    padding: 35px 22px 45px;
  }
  .clause {
    padding: 10px 8px;
    gap: 8px;
  }
  .tab-btn {
    padding: 10px 20px;
  }
  .red-stamp, .gold-stamp {
    width: 90px;
    height: 90px;
    top: -40px;
  }
  .red-stamp span, .gold-stamp span {
    font-size: 10px;
  }
  .red-stamp .stamp-big, .gold-stamp .stamp-big {
    font-size: 14px;
  }
}
</style>
</head>
<body>

<div class="desk-surface">

  <div class="bsd">בס״ד</div>

  <div class="app-title">
    <h1>החוזה שלי עם עצמי</h1>
    <div class="subtitle">לשחרר את הישן ✦ לחתום על החדש</div>
  </div>

  <div class="tab-nav">
    <button class="tab-btn active" id="tabOld" onclick="switchTab('old')">החוזה הישן</button>
    <button class="tab-btn" id="tabNew" onclick="switchTab('new')">החוזה החדש</button>
  </div>

  <div class="contracts-wrapper">

    <!-- ========== OLD CONTRACT ========== -->
    <div class="contract active" id="contractOld">
      <div class="paper paper-old">
        
        <div class="watermark watermark-old">מבוטל</div>
        <div class="bsd-paper">בס״ד</div>

        <div class="contract-header">
          <div class="header-ornament">⸻ ✦ ⸻</div>
          <h2 class="old-title">חוזה ישן ומיושן</h2>
          <div class="contract-number">חוזה מס׳ 001 — נחתם בילדות</div>
          <div class="header-line header-line-old"></div>
        </div>

        <div class="preamble preamble-old">
          הואיל ואני, הילדה הקטנה שהייתי,<br>
          קיבלתי על עצמי את <strong>הסעיפים הבאים</strong><br>
          כתנאי הכרחי לזכות באהבה ובזוגיות —<br>
          ומאחר שהאמנתי בכל ליבי שאלו הם חוקי העולם:
        </div>

        <div class="clauses-section">
          <div class="section-title section-title-old">סעיפי החוזה</div>
          <div class="select-all-area">
            <button class="btn-select-all-old" onclick="selectAllOld()">✗ סמני את כל הסעיפים לביטול</button>
          </div>

          <div class="clause clause-old" onclick="toggleOldClause(this)">
            <div class="clause-checkbox"></div>
            <div class="clause-number clause-number-old">א.</div>
            <div class="clause-text clause-text-old">
              עליי להיות מושלמת בכל עת — ללא טעויות, ללא חולשות, ללא רגעים של אי־ודאות.
              <span class="clause-subtext">״אם אני לא מושלמת, אף אחד לא ירצה אותי״</span>
            </div>
          </div>

          <div class="clause clause-old" onclick="toggleOldClause(this)">
            <div class="clause-checkbox"></div>
            <div class="clause-number clause-number-old">ב.</div>
            <div class="clause-text clause-text-old">
              עליי לוותר על הצרכים שלי ולהעדיף תמיד את השני — גם על חשבון עצמי.
              <span class="clause-subtext">״אם אני מבקשת משהו, אני אנוכית״</span>
            </div>
          </div>

          <div class="clause clause-old" onclick="toggleOldClause(this)">
            <div class="clause-checkbox"></div>
            <div class="clause-number clause-number-old">ג.</div>
            <div class="clause-text clause-text-old">
              עליי להסתיר את הרגשות האמיתיים שלי — בכי זה חולשה, כעס זה דבר רע.
              <span class="clause-subtext">״אם אני מראה מה אני מרגישה, ידחו אותי״</span>
            </div>
          </div>

          <div class="clause clause-old" onclick="toggleOldClause(this)">
            <div class="clause-checkbox"></div>
            <div class="clause-number clause-number-old">ד.</div>
            <div class="clause-text clause-text-old">
              עליי להרוויח את האהבה — היא לא מגיעה לי סתם, חינם, בלי מאמץ.
              <span class="clause-subtext">״אהבה היא דבר שמקבלים רק בתמורה למשהו״</span>
            </div>
          </div>

          <div class="clause clause-old" onclick="toggleOldClause(this)">
            <div class="clause-checkbox"></div>
            <div class="clause-number clause-number-old">ה.</div>
            <div class="clause-text clause-text-old">
              עליי להיות חזקה תמיד ולא לבקש עזרה מאף אחד.
              <span class="clause-subtext">״אם אני צריכה עזרה, אני חלשה ומכבידה״</span>
            </div>
          </div>

          <div class="clause clause-old" onclick="toggleOldClause(this)">
            <div class="clause-checkbox"></div>
            <div class="clause-number clause-number-old">ו.</div>
            <div class="clause-text clause-text-old">
              עליי להתאים את עצמי לציפיות של אחרים — גם אם זה מוחק את מי שאני באמת.
              <span class="clause-subtext">״אם אני אהיה עצמי, לא אהיה מספיק טובה״</span>
            </div>
          </div>

          <div class="clause clause-old" onclick="toggleOldClause(this)">
            <div class="clause-checkbox"></div>
            <div class="clause-number clause-number-old">ז.</div>
            <div class="clause-text clause-text-old">
              עליי לסבול בשקט — כי ככה עובדות מערכות יחסים, ככה זה אצל כולם.
              <span class="clause-subtext">״אם אני מתלוננת, אני בררנית מדי״</span>
            </div>
          </div>

          <div class="clause clause-old" onclick="toggleOldClause(this)">
            <div class="clause-checkbox"></div>
            <div class="clause-number clause-number-old">ח.</div>
            <div class="clause-text clause-text-old">
              אני אחראית לרגשות של בן הזוג — אם הוא עצוב, זו אשמתי.
              <span class="clause-subtext">״אם הוא לא מאושר, כנראה שאני לא מספיקה״</span>
            </div>
          </div>

          <div class="clause clause-old" onclick="toggleOldClause(this)">
            <div class="clause-checkbox"></div>
            <div class="clause-number clause-number-old">ט.</div>
            <div class="clause-text clause-text-old">
              עליי להיראות תמיד בסדר מבחוץ — גם כשמבפנים אני נשברת.
              <span class="clause-subtext">״אסור שיראו שלא טוב לי״</span>
            </div>
          </div>

          <div class="clause clause-old" onclick="toggleOldClause(this)">
            <div class="clause-checkbox"></div>
            <div class="clause-number clause-number-old">י.</div>
            <div class="clause-text clause-text-old">
              עליי לרצות את כולם כל הזמן — לוודא שכולם מרוצים ממני, גם על חשבון עצמי.
              <span class="clause-subtext">״אם הוא לא מרוצה ממני, הוא יעזוב אותי״</span>
            </div>
          </div>

          <div class="clause clause-old" onclick="toggleOldClause(this)">
            <div class="clause-checkbox"></div>
            <div class="clause-number clause-number-old">יא.</div>
            <div class="clause-text clause-text-old">
              עליי להיות זמינה תמיד עבור בן הזוג — בתחילת הקשר ובמהלכו, בכל שעה ובכל מצב.
              <span class="clause-subtext">״אם אני לא זמינה, הוא ימצא מישהי אחרת״</span>
            </div>
          </div>

          <div class="clause clause-old" onclick="toggleOldClause(this)">
            <div class="clause-checkbox"></div>
            <div class="clause-number clause-number-old">יב.</div>
            <div class="clause-text clause-text-old">
              אני תלויה בבן הזוג — בלעדיו אני לא שלמה, לא מסוגלת, לא יכולה לתפקד.
              <span class="clause-subtext">״אני חצי בן אדם בלי מישהו לצידי״</span>
            </div>
          </div>

          <div class="clause clause-old" onclick="toggleOldClause(this)">
            <div class="clause-checkbox"></div>
            <div class="clause-number clause-number-old">יג.</div>
            <div class="clause-text clause-text-old">
              עליי לפחד כל הזמן שהוא יעזוב, ישתנה, ימצא מישהי אחרת — הפחד הוא חלק מאהבה.
              <span class="clause-subtext">״אם אני לא מפחדת לאבד אותו, כנראה שאני לא מספיק אוהבת״</span>
            </div>
          </div>

          <div class="clause clause-old" onclick="toggleOldClause(this)">
            <div class="clause-checkbox"></div>
            <div class="clause-number clause-number-old">יד.</div>
            <div class="clause-text clause-text-old">
              עליי להילחם על תשומת הלב של בן הזוג ולהיראות מושכת כל הזמן — כי הוא עלול ללכת עם אחרות.
              <span class="clause-subtext">״אם אני לא נלחמת על תשומת הלב שלו, הוא ימצא מישהי טובה ממני״</span>
            </div>
          </div>

          <div class="clause clause-old" onclick="toggleOldClause(this)">
            <div class="clause-checkbox"></div>
            <div class="clause-number clause-number-old">טו.</div>
            <div class="clause-text clause-text-old">
              בזוגיות צריך לוותר על חלקים מעצמי — התחביבים שלי, החברות שלי, החלומות שלי.
              <span class="clause-subtext">״אם אני לא מוותרת, אני לא מספיק מחויבת לקשר״</span>
            </div>
          </div>

          <div class="clause clause-old" onclick="toggleOldClause(this)">
            <div class="clause-checkbox"></div>
            <div class="clause-number clause-number-old">טז.</div>
            <div class="clause-text clause-text-old">
              אין לי מקום לעצמי — לא לרגשות שלי, לא למחשבות שלי, לא לתחביבים שלי ולא להתפתחות אישית.
              <span class="clause-subtext">״הצרכים שלי תמיד באים אחרונים״</span>
            </div>
          </div>

          <div class="clause clause-old" onclick="toggleOldClause(this)">
            <div class="clause-checkbox"></div>
            <div class="clause-number clause-number-old">יז.</div>
            <div class="clause-text clause-text-old">
              עליי לתת ולתת בלי גבולות — גם כשאני מותשת, גם כשלא נשאר לי כלום לעצמי.
              <span class="clause-subtext">״אם אני לא נותנת הכל, אני לא אוהבת מספיק״</span>
            </div>
          </div>

          <div class="clause clause-old" onclick="toggleOldClause(this)">
            <div class="clause-checkbox"></div>
            <div class="clause-number clause-number-old">יח.</div>
            <div class="clause-text clause-text-old">
              הערך העצמי הנמוך שלי גרם לי לבחור במי שלא מתאים — העיקר שלא יעזבו אותי, גם אם לא טוב לי.
              <span class="clause-subtext">״עדיף מישהו שלא מתאים מאשר להיות לבד ולהרגיש שאני לא שווה״</span>
            </div>
          </div>

          <div class="clause clause-old" onclick="toggleOldClause(this)">
            <div class="clause-checkbox"></div>
            <div class="clause-number clause-number-old">יט.</div>
            <div class="clause-text clause-text-old">
              הזמן שלי והצרכים שלי לא באמת חשובים — תמיד אפשר לדחות אותם, תמיד יש משהו דחוף יותר של מישהו אחר.
              <span class="clause-subtext">״הצרכים שלי יכולים לחכות, של אחרים — לא״</span>
            </div>
          </div>

          <div class="clause clause-old" onclick="toggleOldClause(this)">
            <div class="clause-checkbox"></div>
            <div class="clause-number clause-number-old">כ.</div>
            <div class="clause-text clause-text-old">
              כל הנטל הכלכלי נופל עליי — אני צריכה לסחוב הכל לבד ולא לבקש שותפות.
              <span class="clause-subtext">״אם אני מבקשת חלוקה הוגנת, אני תובענית מדי״</span>
            </div>
          </div>

          <div class="clause clause-old" onclick="toggleOldClause(this)">
            <div class="clause-checkbox"></div>
            <div class="clause-number clause-number-old">כא.</div>
            <div class="clause-text clause-text-old">
              הרעיונות שלי לא מספיק טובים — אני צריכה להקטין את עצמי ולא להעז לחלום בגדול.
              <span class="clause-subtext">״מי אני בכלל שאצליח? עדיף לא לנסות מאשר להיכשל״</span>
            </div>
          </div>

          <div class="clause clause-old" onclick="toggleOldClause(this)">
            <div class="clause-checkbox"></div>
            <div class="clause-number clause-number-old">כב.</div>
            <div class="clause-text clause-text-old">
              עדיף להיות עם מישהו שלא מתאים לי מאשר להיות לבד — כי לבד זה מפחיד.
              <span class="clause-subtext">״להיות לבד אומר שמשהו לא בסדר איתי״</span>
            </div>
          </div>

        </div>

        <div class="stamp-container">
          <div class="red-stamp" id="oldStamp">
            <span>חוזה זה</span>
            <span class="stamp-big">מבוטל</span>
            <span>ומבוטל</span>
          </div>
        </div>

        <div class="signature-area">
          <div class="signature-line">
            <span class="signature-label signature-label-old">חתימת המשחררת:</span>
            <input type="text" class="signature-input signature-input-old" id="oldSignature" placeholder="חתמי כאן לביטול החוזה...">
          </div>
          <div class="date-line date-line-old" id="oldDate"></div>
        </div>

        <div class="action-area">
          <button class="btn-cancel" onclick="cancelOldContract()">אני מבטלת את החוזה הזה ✗</button>
        </div>

        <div class="progress-area progress-old" id="oldProgress">
          סמני את הסעיפים שאת רוצה לשחרר
        </div>

      </div>
    </div>

    <!-- ========== NEW CONTRACT ========== -->
    <div class="contract" id="contractNew">
      <div class="paper paper-new">

        <div class="watermark watermark-new">♡</div>
        <div class="bsd-paper">בס״ד</div>

        <div class="contract-header">
          <div class="header-ornament" style="color: var(--rose-gold);">⸻ ♡ ⸻</div>
          <h2 class="new-title">החוזה החדש שלי</h2>
          <div class="contract-number" style="color: var(--rose-gold);">חוזה מס׳ 002 — נחתם מתוך אהבה עצמית וערך עצמי</div>
          <div class="header-line header-line-new"></div>
        </div>

        <div class="preamble preamble-new">
          אני, האישה שאני היום,<br>
          מתוך בחירה חופשית ואהבה עמוקה לעצמי,<br>
          <strong>מתחייבת כלפי עצמי בראש ובראשונה</strong> —<br>
          כי רק מתוך שלמות פנימית אבחר בזוגיות:
        </div>

        <div class="clauses-section">
          <div class="section-title section-title-new">סעיפי ההתחייבות</div>
          <div class="select-all-area">
            <button class="btn-select-all-new" onclick="selectAllNew()">♥ אשרי את כל הסעיפים</button>
          </div>

          <div class="clause clause-new" onclick="toggleNewClause(this)">
            <div class="clause-heart">♡</div>
            <div class="clause-number clause-number-new">א.</div>
            <div class="clause-text clause-text-new">
              אני מתחייבת לקבל את עצמי כמו שאני — עם כל מה שאני, והיופי שבחוסר השלמות.
              <span class="clause-subtext">אני שלמה גם כשאני לא מושלמת</span>
            </div>
          </div>

          <div class="clause clause-new" onclick="toggleNewClause(this)">
            <div class="clause-heart">♡</div>
            <div class="clause-number clause-number-new">ב.</div>
            <div class="clause-text clause-text-new">
              אני מתחייבת לכבד את הצרכים שלי — הם לא מותרות, הם לא בררנות, הם חלק ממי שאני.
              <span class="clause-subtext">הצרכים שלי חשובים ולגיטימיים</span>
            </div>
          </div>

          <div class="clause clause-new" onclick="toggleNewClause(this)">
            <div class="clause-heart">♡</div>
            <div class="clause-number clause-number-new">ג.</div>
            <div class="clause-text clause-text-new">
              אני מתחייבת להרגיש את מה שאני מרגישה — בלי לשפוט, בלי להתבייש, בלי לברוח.
              <span class="clause-subtext">כל רגש שלי הוא חלק ממני והוא מבורך</span>
            </div>
          </div>

          <div class="clause clause-new" onclick="toggleNewClause(this)">
            <div class="clause-heart">♡</div>
            <div class="clause-number clause-number-new">ד.</div>
            <div class="clause-text clause-text-new">
              אני מתחייבת לדעת שאני ראויה לאהבה — לא בגלל מה שאני עושה, אלא בגלל מי שאני.
              <span class="clause-subtext">אני מספיקה בדיוק כמו שאני</span>
            </div>
          </div>

          <div class="clause clause-new" onclick="toggleNewClause(this)">
            <div class="clause-heart">♡</div>
            <div class="clause-number clause-number-new">ה.</div>
            <div class="clause-text clause-text-new">
              אני מתחייבת לבקש עזרה כשאני צריכה — כי פנייה לעזרה היא גבורה, לא חולשה.
              <span class="clause-subtext">אני חזקה מספיק כדי לדעת שאני לא צריכה לעשות הכל לבד</span>
            </div>
          </div>

          <div class="clause clause-new" onclick="toggleNewClause(this)">
            <div class="clause-heart">♡</div>
            <div class="clause-number clause-number-new">ו.</div>
            <div class="clause-text clause-text-new">
              אני מתחייבת להישאר נאמנה למי שאני — ולא לעצב את עצמי לפי הציפיות של אחרים.
              <span class="clause-subtext">האותנטיות שלי היא המתנה הכי גדולה שלי</span>
            </div>
          </div>

          <div class="clause clause-new" onclick="toggleNewClause(this)">
            <div class="clause-heart">♡</div>
            <div class="clause-number clause-number-new">ז.</div>
            <div class="clause-text clause-text-new">
              אני מתחייבת לשים גבולות ברורים — כי כל מי שאוהב אותי באמת, יכבד את הגבולות שלי.
              <span class="clause-subtext">גבולות הם מעשה של אהבה, לא של דחייה</span>
            </div>
          </div>

          <div class="clause clause-new" onclick="toggleNewClause(this)">
            <div class="clause-heart">♡</div>
            <div class="clause-number clause-number-new">ח.</div>
            <div class="clause-text clause-text-new">
              אני מתחייבת לקחת אחריות על האושר שלי — ולא להפקיד אותו בידי מישהו אחר.
              <span class="clause-subtext">האושר שלי מתחיל ממני, לא מבן הזוג</span>
            </div>
          </div>

          <div class="clause clause-new" onclick="toggleNewClause(this)">
            <div class="clause-heart">♡</div>
            <div class="clause-number clause-number-new">ט.</div>
            <div class="clause-text clause-text-new">
              אני מתחייבת לבחור רק בזוגיות שמרגישה כמו בית — מקום של שקט, כבוד, וצמיחה.
              <span class="clause-subtext">אני לא צריכה להילחם על אהבה — אהבה אמיתית זורמת</span>
            </div>
          </div>

          <div class="clause clause-new" onclick="toggleNewClause(this)">
            <div class="clause-heart">♡</div>
            <div class="clause-number clause-number-new">י.</div>
            <div class="clause-text clause-text-new">
              אני מתחייבת להפסיק לרצות — איני מרצה יותר אף אחד אלא אם זה מתוך בחירה ולא מתוך פחד לאבד.
              <span class="clause-subtext">אני נותנת מתוך שפע, לא מתוך חרדה</span>
            </div>
          </div>

          <div class="clause clause-new" onclick="toggleNewClause(this)">
            <div class="clause-heart">♡</div>
            <div class="clause-number clause-number-new">יא.</div>
            <div class="clause-text clause-text-new">
              אני מתחייבת לכבד את הזמן והמרחב שלי — איני צריכה להיות זמינה תמיד, לא בתחילת קשר ולא במהלכו.
              <span class="clause-subtext">הזמינות שלי היא מתנה שאני בוחרת לתת, לא חובה</span>
            </div>
          </div>

          <div class="clause clause-new" onclick="toggleNewClause(this)">
            <div class="clause-heart">♡</div>
            <div class="clause-number clause-number-new">יב.</div>
            <div class="clause-text clause-text-new">
              אני מתחייבת להיות שלמה עם עצמי — אני לא חצי שמחפשת חצי, אני שלמה שבוחרת שלם.
              <span class="clause-subtext">אני מסוגלת, עצמאית, ושלמה — גם כשאני לבד</span>
            </div>
          </div>

          <div class="clause clause-new" onclick="toggleNewClause(this)">
            <div class="clause-heart">♡</div>
            <div class="clause-number clause-number-new">יג.</div>
            <div class="clause-text clause-text-new">
              אני מתחייבת לשחרר את הפחד — אהבה אמיתית היא לא פחד, היא ביטחון ואמון.
              <span class="clause-subtext">אני בוחרת לאהוב מתוך שלווה, לא מתוך חרדה</span>
            </div>
          </div>

          <div class="clause clause-new" onclick="toggleNewClause(this)">
            <div class="clause-heart">♡</div>
            <div class="clause-number clause-number-new">יד.</div>
            <div class="clause-text clause-text-new">
              אני מתחייבת לדעת שאני לא צריכה להילחם על תשומת הלב של אף אחד — מי שרוצה אותי, יהיה שם.
              <span class="clause-subtext">אני לא צריכה להוכיח את עצמי — אני מספיקה כמו שאני</span>
            </div>
          </div>

          <div class="clause clause-new" onclick="toggleNewClause(this)">
            <div class="clause-heart">♡</div>
            <div class="clause-number clause-number-new">טו.</div>
            <div class="clause-text clause-text-new">
              אני מתחייבת לשמור על עצמי בתוך הקשר — החברות שלי, התחביבים שלי, החלומות שלי הם חלק ממני.
              <span class="clause-subtext">אני לא מאבדת את עצמי בתוך מערכת יחסים</span>
            </div>
          </div>

          <div class="clause clause-new" onclick="toggleNewClause(this)">
            <div class="clause-heart">♡</div>
            <div class="clause-number clause-number-new">טז.</div>
            <div class="clause-text clause-text-new">
              אני מתחייבת לתת לעצמי מקום — מקום לרגשות, למחשבות, לתחביבים, ולהתפתחות אישית.
              <span class="clause-subtext">אני ראויה לתשומת לב מעצמי, לא רק מאחרים</span>
            </div>
          </div>

          <div class="clause clause-new" onclick="toggleNewClause(this)">
            <div class="clause-heart">♡</div>
            <div class="clause-number clause-number-new">יז.</div>
            <div class="clause-text clause-text-new">
              אני מתחייבת לתת מתוך בחירה ולא מתוך הרגל — ולשמור על עצמי גם כשאני נותנת.
              <span class="clause-subtext">נתינה בריאה מתחילה מכוס מלאה, לא מכוס ריקה</span>
            </div>
          </div>

          <div class="clause clause-new" onclick="toggleNewClause(this)">
            <div class="clause-heart">♡</div>
            <div class="clause-number clause-number-new">יח.</div>
            <div class="clause-text clause-text-new">
              אני מתחייבת לבחור מתוך ערך עצמי וביטחון — ולא מתוך פחד מבדידות או תחושה שאני לא שווה יותר.
              <span class="clause-subtext">אני שווה את הטוב ביותר, ואני בוחרת רק ממי שמכבד את זה</span>
            </div>
          </div>

          <div class="clause clause-new" onclick="toggleNewClause(this)">
            <div class="clause-heart">♡</div>
            <div class="clause-number clause-number-new">יט.</div>
            <div class="clause-text clause-text-new">
              אני מתחייבת לכבד את הזמן שלי ואת הצרכים שלי — הם חשובים, הם לגיטימיים, והם לא צריכים לחכות לאף אחד.
              <span class="clause-subtext">הזמן שלי שווה, והצרכים שלי באים ראשונים</span>
            </div>
          </div>

          <div class="clause clause-new" onclick="toggleNewClause(this)">
            <div class="clause-heart">♡</div>
            <div class="clause-number clause-number-new">כ.</div>
            <div class="clause-text clause-text-new">
              אני מתחייבת לדרוש שותפות כלכלית הוגנת — אני לא סוחבת הכל לבד, ובן זוג אמיתי נושא איתי ביחד.
              <span class="clause-subtext">שותפות אמיתית היא גם בכסף, לא רק ברגשות</span>
            </div>
          </div>

          <div class="clause clause-new" onclick="toggleNewClause(this)">
            <div class="clause-heart">♡</div>
            <div class="clause-number clause-number-new">כא.</div>
            <div class="clause-text clause-text-new">
              אני מתחייבת להאמין ברעיונות שלי ולפעול עליהם — אני ראויה לעידוד, לתמיכה, ולמישהו שיגיד ״לכי על זה״ ולא ״מי את בכלל״.
              <span class="clause-subtext">החלומות שלי שווים, ואני מסוגלת להגשים אותם</span>
            </div>
          </div>

          <div class="clause clause-new" onclick="toggleNewClause(this)">
            <div class="clause-heart">♡</div>
            <div class="clause-number clause-number-new">כב.</div>
            <div class="clause-text clause-text-new">
              אני מתחייבת לדעת שלהיות לבד זה בסדר — ושעדיף להיות לבד ושלמה מאשר בזוגיות ושבורה.
              <span class="clause-subtext">אני שלמה עם עצמי, ומתוך השלמות הזו — אבחר</span>
            </div>
          </div>

        </div>

        <div class="stamp-container">
          <div class="gold-stamp" id="newStamp">
            <span>חוזה זה</span>
            <span class="stamp-big">מאושר</span>
            <span>בחתימתי</span>
          </div>
        </div>

        <div class="signature-area">
          <div class="signature-line">
            <span class="signature-label signature-label-new">חתימתי באהבה:</span>
            <input type="text" class="signature-input signature-input-new" id="newSignature" placeholder="חתמי כאן על ההתחייבות לעצמך...">
          </div>
          <div class="date-line date-line-new" id="newDate"></div>
        </div>

        <div class="action-area">
          <button class="btn-sign" onclick="signNewContract()">אני חותמת על החוזה החדש ♡</button>
        </div>

        <div class="progress-area progress-new" id="newProgress">
          סמני את הסעיפים שאת מתחייבת אליהם
        </div>

      </div>
    </div>

  </div>

  <div class="utility-bar">
    <button class="btn-utility" onclick="shareContract()">
      <span class="icon">✉</span>
      <span>שיתוף</span>
    </button>
    <button class="btn-utility" onclick="saveContract()">
      <span class="icon">⬇</span>
      <span>שמירה כ-PDF ותמונה</span>
    </button>
  </div>

  <div class="reset-area">
    <button class="btn-reset" onclick="resetAll()">איפוס</button>
  </div>

</div>

<!-- Toast -->
<div class="toast" id="toast"></div>

<!-- Celebration Overlay -->
<div class="celebration-overlay" id="celebrationOld">
  <div class="celebration-card">
    <h2>✗ החוזה הישן בוטל ✗</h2>
    <p>
      כל הסעיפים המגבילים שלקחת על עצמך בילדות<br>
      <strong>כבר לא תקפים.</strong><br><br>
      הילדה הקטנה שבך יכולה סוף סוף לנשום.<br>
      עכשיו הגיע הזמן לחתום על חוזה חדש —<br>
      חוזה שנכתב מתוך אהבה.
    </p>
    <div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap;">
      <button class="close-btn" onclick="saveOldAndContinue()">⬇ שמירה ומעבר לחוזה החדש →</button>
    </div>
  </div>
</div>

<div class="celebration-overlay" id="celebrationNew">
  <div class="celebration-card">
    <h2>♡ החוזה החדש נחתם ♡</h2>
    <p>
      מהיום את חיה לפי הכללים שלך.<br>
      <strong>את קודם כל שלך.</strong><br><br>
      ורק מתוך האהבה הזו לעצמך —<br>
      תבחרי את מי שראוי לך.
    </p>
    <button class="close-btn" onclick="closeCelebration('new')">♡ אני שלי ♡</button>
  </div>
</div>

<script>
function resetAll() {
  showConfirmDialog('לאפס את כל הסעיפים והחתימות?', function() {
    document.querySelectorAll('.clause-old').forEach(function(c) {
      c.classList.remove('crossed');
    });
    document.querySelectorAll('.clause-new .clause-heart').forEach(function(h) {
      h.classList.remove('checked');
      h.textContent = '♡';
    });
    document.getElementById('oldSignature').value = '';
    document.getElementById('newSignature').value = '';
    document.getElementById('oldDate').textContent = '';
    document.getElementById('newDate').textContent = '';
    document.getElementById('oldStamp').classList.remove('visible');
    document.getElementById('newStamp').classList.remove('visible');
    document.getElementById('celebrationOld').classList.remove('active');
    document.getElementById('celebrationNew').classList.remove('active');
    document.querySelectorAll('.confetti-piece').forEach(function(c) { c.remove(); });
    updateOldProgress();
    updateNewProgress();
    showToast('כל הסעיפים אופסו בהצלחה');
  });
}

function selectAllOld() {
  var clauses = document.querySelectorAll('.clause-old');
  clauses.forEach(function(c, i) {
    setTimeout(function() {
      c.classList.add('crossed');
      if (i === clauses.length - 1) updateOldProgress();
    }, i * 80);
  });
}

function selectAllNew() {
  var hearts = document.querySelectorAll('.clause-new .clause-heart');
  hearts.forEach(function(h, i) {
    setTimeout(function() {
      h.classList.add('checked');
      h.textContent = '♥';
      if (i === hearts.length - 1) updateNewProgress();
    }, i * 80);
  });
}

function switchTab(tab) {
  document.getElementById('tabOld').classList.toggle('active', tab === 'old');
  document.getElementById('tabNew').classList.toggle('active', tab === 'new');
  document.getElementById('contractOld').classList.toggle('active', tab === 'old');
  document.getElementById('contractNew').classList.toggle('active', tab === 'new');
}

function toggleOldClause(el) {
  el.classList.toggle('crossed');
  updateOldProgress();
}

function toggleNewClause(el) {
  var heart = el.querySelector('.clause-heart');
  heart.classList.toggle('checked');
  if (heart.classList.contains('checked')) {
    heart.textContent = '♥';
  } else {
    heart.textContent = '♡';
  }
  updateNewProgress();
}

function updateOldProgress() {
  var total = document.querySelectorAll('.clause-old').length;
  var crossed = document.querySelectorAll('.clause-old.crossed').length;
  var el = document.getElementById('oldProgress');
  if (crossed === 0) {
    el.textContent = 'סמני את הסעיפים שאת רוצה לשחרר';
  } else if (crossed === total) {
    el.textContent = 'כל הסעיפים מוכנים לביטול — חתמי למטה!';
  } else {
    el.textContent = 'שוחררו ' + crossed + ' מתוך ' + total + ' סעיפים';
  }
}

function updateNewProgress() {
  var total = document.querySelectorAll('.clause-new').length;
  var checked = document.querySelectorAll('.clause-new .clause-heart.checked').length;
  var el = document.getElementById('newProgress');
  if (checked === 0) {
    el.textContent = 'סמני את הסעיפים שאת מתחייבת אליהם';
  } else if (checked === total) {
    el.textContent = 'כל הסעיפים מאושרים — חתמי למטה!';
  } else {
    el.textContent = 'אושרו ' + checked + ' מתוך ' + total + ' סעיפים';
  }
}

function getHebrewDate() {
  var d = new Date();
  var months = ['ינואר','פברואר','מרץ','אפריל','מאי','יוני','יולי','אוגוסט','ספטמבר','אוקטובר','נובמבר','דצמבר'];
  var hours = d.getHours().toString().padStart(2, '0');
  var minutes = d.getMinutes().toString().padStart(2, '0');
  return d.getDate() + ' ב' + months[d.getMonth()] + ' ' + d.getFullYear() + ', שעה ' + hours + ':' + minutes;
}

function cancelOldContract() {
  var sig = document.getElementById('oldSignature').value.trim();
  if (!sig) {
    showToast('נא לחתום בשמך לפני ביטול החוזה');
    document.getElementById('oldSignature').focus();
    return;
  }
  
  // Cross all clauses
  document.querySelectorAll('.clause-old').forEach(function(c, i) {
    setTimeout(function() {
      c.classList.add('crossed');
    }, i * 150);
  });

  document.getElementById('oldDate').textContent = 'תאריך הביטול: ' + getHebrewDate();
  
  setTimeout(function() {
    document.getElementById('oldStamp').classList.add('visible');
    updateOldProgress();
  }, 1600);

  setTimeout(function() {
    document.getElementById('celebrationOld').classList.add('active');
  }, 2200);
}

function signNewContract() {
  var sig = document.getElementById('newSignature').value.trim();
  if (!sig) {
    showToast('נא לחתום בשמך לפני חתימת החוזה');
    document.getElementById('newSignature').focus();
    return;
  }

  // Check all hearts
  document.querySelectorAll('.clause-new .clause-heart').forEach(function(h, i) {
    setTimeout(function() {
      h.classList.add('checked');
      h.textContent = '♥';
    }, i * 120);
  });

  document.getElementById('newDate').textContent = 'תאריך החתימה: ' + getHebrewDate();
  
  setTimeout(function() {
    document.getElementById('newStamp').classList.add('visible');
    updateNewProgress();
  }, 1400);

  setTimeout(function() {
    document.getElementById('celebrationNew').classList.add('active');
    createConfetti();
  }, 2000);
}

function saveOldAndContinue() {
  // Close the celebration overlay first so the contract is visible for screenshot
  document.getElementById('celebrationOld').classList.remove('active');
  
  // Small delay to let overlay close, then save
  setTimeout(function() {
    var contractEl = document.querySelector('.paper-old');
    
    function loadScript(src) {
      return new Promise(function(resolve, reject) {
        if (document.querySelector('script[src="' + src + '"]')) { resolve(); return; }
        var s = document.createElement('script');
        s.src = src;
        s.onload = resolve;
        s.onerror = reject;
        document.head.appendChild(s);
      });
    }

    var h2cUrl = 'https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js';
    var jspdfUrl = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js';

    showToast('שומרת את החוזה הישן...');

    Promise.all([loadScript(h2cUrl), loadScript(jspdfUrl)]).then(function() {
      return html2canvas(contractEl, {
        backgroundColor: '#f5f0e8',
        scale: 2,
        useCORS: true,
        logging: false,
        width: contractEl.scrollWidth,
        height: contractEl.scrollHeight
      });
    }).then(function(canvas) {
      var imgData = canvas.toDataURL('image/png');
      
      // Save as image
      var imgLink = document.createElement('a');
      imgLink.href = imgData;
      imgLink.download = 'החוזה-הישן-שלי.png';
      document.body.appendChild(imgLink);
      imgLink.click();
      document.body.removeChild(imgLink);
      
      // Save as PDF
      try {
        var jsPDF = window.jspdf.jsPDF;
        var ratio = canvas.width / canvas.height;
        var pdfWidth = 210;
        var pdfHeight = pdfWidth / ratio;
        var pdf = pdfHeight > 297 
          ? new jsPDF('p', 'mm', [pdfWidth, pdfHeight + 20]) 
          : new jsPDF('p', 'mm', 'a4');
        pdf.addImage(imgData, 'PNG', 0, 10, pdfWidth, pdfHeight);
        pdf.save('החוזה-הישן-שלי.pdf');
      } catch(e) { console.log('PDF skip:', e); }
      
      showToast('החוזה הישן נשמר ✦ עוברת לחוזה החדש...');
      setTimeout(function() { switchTab('new'); }, 1500);
    }).catch(function() {
      saveAsText('old');
      setTimeout(function() { switchTab('new'); }, 1000);
    });
  }, 300);
}

function closeCelebration(type) {
  document.getElementById('celebration' + type.charAt(0).toUpperCase() + type.slice(1)).classList.remove('active');
  if (type === 'old') {
    switchTab('new');
  }
  // Remove confetti
  document.querySelectorAll('.confetti-piece').forEach(function(c) { c.remove(); });
}

function showConfirmDialog(message, onConfirm) {
  var overlay = document.createElement('div');
  overlay.style.cssText = 'position:fixed;inset:0;background:rgba(42,32,24,0.85);z-index:300;display:flex;align-items:center;justify-content:center;animation:fadeIn 0.3s ease;';
  
  var card = document.createElement('div');
  card.style.cssText = 'background:#fdf8f0;padding:35px 30px;text-align:center;max-width:400px;margin:20px;position:relative;box-shadow:0 15px 50px rgba(0,0,0,0.5);font-family:Frank Ruhl Libre,serif;';
  
  var msg = document.createElement('p');
  msg.textContent = message;
  msg.style.cssText = 'font-size:17px;color:#3d2b1f;margin-bottom:25px;line-height:1.8;';
  
  var btnRow = document.createElement('div');
  btnRow.style.cssText = 'display:flex;gap:12px;justify-content:center;flex-wrap:wrap;';
  
  var btnYes = document.createElement('button');
  btnYes.textContent = 'כן, אפסי';
  btnYes.style.cssText = 'font-family:Frank Ruhl Libre,serif;font-size:15px;padding:10px 30px;background:#8b2500;color:#f5f0e8;border:none;cursor:pointer;letter-spacing:1px;';
  btnYes.onmouseover = function() { this.style.background = '#a83a1a'; };
  btnYes.onmouseout = function() { this.style.background = '#8b2500'; };
  
  var btnNo = document.createElement('button');
  btnNo.textContent = 'ביטול';
  btnNo.style.cssText = 'font-family:Frank Ruhl Libre,serif;font-size:15px;padding:10px 30px;background:transparent;color:#6b5744;border:1px solid #6b5744;cursor:pointer;letter-spacing:1px;';
  btnNo.onmouseover = function() { this.style.background = 'rgba(107,87,68,0.08)'; };
  btnNo.onmouseout = function() { this.style.background = 'transparent'; };
  
  btnYes.onclick = function() { document.body.removeChild(overlay); onConfirm(); };
  btnNo.onclick = function() { document.body.removeChild(overlay); };
  
  btnRow.appendChild(btnYes);
  btnRow.appendChild(btnNo);
  card.appendChild(msg);
  card.appendChild(btnRow);
  overlay.appendChild(card);
  document.body.appendChild(overlay);
}

function showToast(msg) {
  var toast = document.getElementById('toast');
  toast.textContent = msg;
  toast.classList.add('visible');
  setTimeout(function() {
    toast.classList.remove('visible');
  }, 2500);
}

function shareContract() {
  var activeTab = document.getElementById('contractOld').classList.contains('active') ? 'old' : 'new';
  var title = activeTab === 'old' ? 'החוזה הישן שלי — שאני משחררת' : 'החוזה החדש שלי — עם עצמי';
  var text = activeTab === 'old' 
    ? 'ביטלתי את החוזה הישן שלקחתי על עצמי בילדות ✗\nהגיע הזמן לחיות לפי הכללים שלי.'
    : 'חתמתי על חוזה חדש עם עצמי ♡\nקודם כל אני שלי, ומתוך השלמות הזו — אבחר.';

  if (navigator.share) {
    navigator.share({
      title: title,
      text: text
    }).then(function() {
      showToast('שותף בהצלחה ✦');
    }).catch(function() {});
  } else {
    var fullText = title + '\n\n' + text;
    if (navigator.clipboard && navigator.clipboard.writeText) {
      navigator.clipboard.writeText(fullText).then(function() {
        showToast('הטקסט הועתק — אפשר להדביק ולשתף ✦');
      }).catch(function() {
        copyFallback(fullText);
      });
    } else {
      copyFallback(fullText);
    }
  }
}

function copyFallback(text) {
  var ta = document.createElement('textarea');
  ta.value = text;
  ta.style.cssText = 'position:fixed;top:-9999px;';
  document.body.appendChild(ta);
  ta.select();
  try {
    document.execCommand('copy');
    showToast('הטקסט הועתק — אפשר להדביק ולשתף ✦');
  } catch(e) {
    showToast('לא ניתן להעתיק כרגע — נסי מדפדפן חיצוני');
  }
  document.body.removeChild(ta);
}

function saveContract() {
  var activeTab = document.getElementById('contractOld').classList.contains('active') ? 'old' : 'new';
  var contractEl = activeTab === 'old' 
    ? document.querySelector('.paper-old') 
    : document.querySelector('.paper-new');

  showToast('מכינה את הקובץ...');

  function loadScript(src) {
    return new Promise(function(resolve, reject) {
      if (document.querySelector('script[src="' + src + '"]')) { resolve(); return; }
      var s = document.createElement('script');
      s.src = src;
      s.onload = resolve;
      s.onerror = reject;
      document.head.appendChild(s);
    });
  }

  var h2cUrl = 'https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js';
  var jspdfUrl = 'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js';

  Promise.all([loadScript(h2cUrl), loadScript(jspdfUrl)]).then(function() {
    return html2canvas(contractEl, {
      backgroundColor: activeTab === 'old' ? '#f5f0e8' : '#fdf8f0',
      scale: 2,
      useCORS: true,
      logging: false,
      width: contractEl.scrollWidth,
      height: contractEl.scrollHeight
    });
  }).then(function(canvas) {
    var imgData = canvas.toDataURL('image/png');
    
    // Save as image
    var imgLink = document.createElement('a');
    imgLink.href = imgData;
    imgLink.download = activeTab === 'old' ? 'החוזה-הישן-שלי.png' : 'החוזה-החדש-שלי.png';
    document.body.appendChild(imgLink);
    imgLink.click();
    document.body.removeChild(imgLink);
    
    // Also save as PDF
    try {
      var jsPDF = window.jspdf.jsPDF;
      var imgWidth = canvas.width;
      var imgHeight = canvas.height;
      var ratio = imgWidth / imgHeight;
      var pdfWidth = 210; // A4 width mm
      var pdfHeight = pdfWidth / ratio;
      
      var pdf;
      if (pdfHeight > 297) {
        pdf = new jsPDF('p', 'mm', [pdfWidth, pdfHeight + 20]);
      } else {
        pdf = new jsPDF('p', 'mm', 'a4');
      }
      
      pdf.addImage(imgData, 'PNG', 0, 10, pdfWidth, pdfHeight);
      pdf.save(activeTab === 'old' ? 'החוזה-הישן-שלי.pdf' : 'החוזה-החדש-שלי.pdf');
    } catch(e) {
      console.log('PDF generation skipped:', e);
    }
    
    showToast('הקובץ נשמר בתיקיית ההורדות שלך ✦');
  }).catch(function(err) {
    console.error('Save error:', err);
    // Fallback to text
    saveAsText(activeTab);
  });
}

function saveAsText(activeTab) {
  var clauses = [];
  var selector = activeTab === 'old' ? '.clause-old .clause-text' : '.clause-new .clause-text';
  document.querySelectorAll(selector).forEach(function(el) {
    var mainText = el.childNodes[0].textContent.trim();
    var sub = el.querySelector('.clause-subtext');
    if (sub) mainText += '\n   (' + sub.textContent.trim() + ')';
    clauses.push(mainText);
  });

  var title = activeTab === 'old' ? 'החוזה הישן — בטל ומבוטל' : 'החוזה החדש שלי';
  var subtitle = activeTab === 'old' ? 'חוזה מס׳ 001 — נחתם בילדות' : 'חוזה מס׳ 002 — נחתם מתוך אהבה עצמית וערך עצמי';
  
  var lines = ['בס״ד', '', '═══════════════════════════════', title, subtitle, '═══════════════════════════════', ''];
  var hebrewNums = ['א','ב','ג','ד','ה','ו','ז','ח','ט','י','יא','יב','יג','יד','טו','טז','יז','יח','יט','כ','כא','כב'];
  clauses.forEach(function(c, i) { lines.push(hebrewNums[i] + '. ' + c); lines.push(''); });
  lines.push('───────────────────────────────');
  var sig = activeTab === 'old' ? document.getElementById('oldSignature').value : document.getElementById('newSignature').value;
  if (sig) lines.push('חתימה: ' + sig);
  lines.push('תאריך: ' + getHebrewDate());

  var blob = new Blob(['\ufeff' + lines.join('\n')], { type: 'text/plain;charset=utf-8' });
  var link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = activeTab === 'old' ? 'החוזה-הישן-שלי.txt' : 'החוזה-החדש-שלי.txt';
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
  showToast('הקובץ נשמר בתיקיית ההורדות שלך ✦');
}

function createConfetti() {
  var colors = ['#f8c8d4', '#c5a55a', '#a8d8c8', '#8b4557', '#d4b96e', '#c4957a', '#fce4ec'];
  for (var i = 0; i < 50; i++) {
    var confetti = document.createElement('div');
    confetti.className = 'confetti-piece';
    confetti.style.left = Math.random() * 100 + 'vw';
    confetti.style.top = '-10px';
    confetti.style.width = (Math.random() * 10 + 5) + 'px';
    confetti.style.height = (Math.random() * 10 + 5) + 'px';
    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
    confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
    confetti.style.transform = 'rotate(' + (Math.random() * 360) + 'deg)';
    
    var duration = Math.random() * 2 + 2;
    var delay = Math.random() * 1.5;
    confetti.style.animation = 'confettiFall ' + duration + 's ease-in ' + delay + 's forwards';
    
    document.body.appendChild(confetti);
  }
}

// Add confetti animation
var style = document.createElement('style');
style.textContent = '@keyframes confettiFall { 0% { transform: translateY(0) rotate(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotate(720deg); opacity: 0; } }';
document.head.appendChild(style);
</script>

</body>
</html>
